# Tailscale

## Использую как базу VPN

![Tailscale demo cover](https://i.imgur.com/3lMWzMJ.png)

\_AMD_, [14.06.2022 17:44]
[In reply to Penguin Grape]

У меня VPN через **[Tailscale](https://tailscale.com)** устроен. Установлен на всех нужных устройствах и на дедике в Франции. На дедике запущен с флагом, который запускает его в качестве exit node. На клиентах выбираю тот сервер, как exit node и так работает VPN

Сам **Tailscale это какая-то вроде и сверхпростая, но в тот же момент и высокоинтеллектуальная штука**, вне предела моего понимания. Работает как раз вроде на базе wireguard и применяется чуть ли бля не в космической промышленности

Лично для меня его прелесть в том, что **вместо переноса VPN конфигов по устройствам**, мне достаточно авторизироваться через GitHub и оно само все подтянет. Еще любое устройство, на котором установлен Tailscale имеет как бы свой статичный локальный IP, по которому к нему можно подключиться. И панелька прикольная. Короче вообще штука хитро интересная. @Mudk1p подкинул, мб он больше шарит

Что мне не понравилось в Tailscale (но я еще не до конца уверен, что проблема именно в нем) – **он выжирает аккум телефона, как голодная сучка**

Но в целом VPN соединение устанавливает быстрее, чем OpenVPN и не отключается 100 раз на день. Хотя может OpenVPN и жрал меньше, потому что 100 раз отключается за день


## Получаем доступ к камерам/принтерам, словно они в локальной сети

У меня есть дом. В доме есть IP камера и комп. Они в одной Wi-Fi сети
Камера в локальной сети доступна по адресу `192.168.1.10:554`, но из интернета недоступна, потому что провайдер выдает "серый IP". Проброс портов в роутере не помогает, покупка белого IP – помогла (но я не хочу за него платить)
Также есть Linux сервер в другой стране, на котором установлен iSpy для просмотра этой камеры

Вот как это выглядит на пальцах:
![](https://i.imgur.com/L54g1Eb.png)

**Задача – сделать камеру доступной в iSpy без покупки "белого IP"**

**Потребуется** всегда включенный комп в одной WiFi сети с камерой (подойдет Raspberry Pi) и установленный на нем TailScale. Можно извратиться и попробовать установить Tailscale на роутер, но так получится сделать с очень немногими роутерами

Итак, камера на `192.168.1.10:554`. Подсеть `192.168.1.0/24`

1. Если комп на Linux (raspberry pi например), то [нужно включить IP Forwarding](https://tailscale.com/kb/1019/subnets/?tab=linux#enable-ip-forwarding)
2. Делаем подсеть частью сети Tailscale: `sudo tailscale up --advertise-routes=192.168.1.0/24` (без sudo, если windows)
3. В панели TailScale аппрувим подключенную подсеть в Machines
4. На нужном хосте, с которого нужен доступ к камерам делаем `sudo tailscale up --accept-routes`

Вуаля, камера доступна с далекого к камерам хоста по `192.168.1.10:554`
