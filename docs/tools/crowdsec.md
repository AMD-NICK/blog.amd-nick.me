# Crowdsec

> –ù–∏–∂–µ –Ω–∞–ø–∏—Å–∞–Ω—ã –∑–∞–º–µ—Ç–∫–∏ –∞-–ª—è –ø–æ—Ç–æ–∫ –º—ã—Å–ª–µ–π. –í –∫–æ–Ω—Ü–µ —Å—é—Ä–ø—Ä–∏–∑

–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–æ—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CrowdSec –∫–∞–∫ —Å—Ä–µ–¥—Å—Ç–≤–æ –∑–∞—â–∏—Ç—ã –æ—Ç DDoS –∞—Ç–∞–∫. –í —Ç–µ–æ—Ä–∏–∏ –∞–ª–≥–æ—Ä–∏—Ç–º –±—ã–ª —Ç–∞–∫–æ–π:

- crowdsec —á–∏—Ç–∞–µ—Ç access.log —Ñ–∞–π–ª –æ—Ç openresty
- –ø–∞—Ä—Å–∏—Ç –∑–∞–ø–∏—Å–∏ —á–µ—Ä–µ–∑ [nginx-logs](https://hub.crowdsec.net/author/crowdsecurity/configurations/nginx-logs)
- –ø—Ä–æ–≥–æ–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ —Å—Ü–µ–Ω–∞—Ä–∏–∏ ([1](https://hub.crowdsec.net/author/crowdsecurity/collections/base-http-scenarios) | [2](https://hub.crowdsec.net/author/crowdsecurity/configurations/nginx-req-limit-exceeded))
- –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –∏–ª–∏ –∑–∞–ø—Ä–æ—Å—ã –≤—ã–∑—ã–≤–∞—é—Ç —É –Ω–µ–≥–æ –ø–æ–¥–æ–∑—Ä–µ–Ω–∏—è, —Ç–æ IP –æ—Ç–ª–µ—Ç–∞–µ—Ç –≤ –±–∞–Ω —á–µ—Ä–µ–∑ API CloudFlare

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–≤–æ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–∞, **—Ö–æ—Ç—å —É ClowdSec –Ω–µ—Ç –Ω–∏–∫–∞–∫–æ–≥–æ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞**. –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ CrowdSec –∏ [—ç—Ç–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏](https://hub.crowdsec.net/author/crowdsecurity/collections/nginx) –ø—Ä–æ—Å—Ç–æ –≤ [acquis.yaml](https://github.com/crowdsecurity/example-docker-compose/blob/main/crowdsec/acquis.yaml) —É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –∫ access.log –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å CrowdSec.

–°—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è nginx –ª–æ–≥–∞ –∏ —Ä–µ—Å—Ç–∞—Ä—Ç–∞ crowdsec –º–æ–∂–Ω–æ –Ω–∞–±–ª—é–¥–∞—Ç—å –∫–∞–∫ –æ–Ω —á–∏—Ç–∞–µ—Ç –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ª–æ–≥–∏ —á–µ—Ä–µ–∑ `cscli metrics`

![cscli_metrics](https://file.def.pm/QwijUB48.jpg)

---

- –ü–æ–º–∏–º–æ nginx –º–æ–∂–µ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è —Å ssh, docker –∏ –≤–æ–æ–±—â–µ –ª—é–±–æ–π –¥–∏—á—å—é
- –°–∞–º –ø–æ —Å–µ–±–µ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–¥–µ–ª–∞–µ—Ç. –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–µ–∑ –≤–µ–± –æ–±–æ–ª–æ—á–∫–∏. –í –æ—Å–Ω–æ–≤–Ω–æ–º –∫–æ–Ω—Ñ–∏–≥–µ —É–∫–∞–∑—ã–≤–∞–µ–º –ø—É—Ç—å –∫ access.log.
- –ü—Ä–∏ –¥–¥–æ—Å –∞—Ç–∞–∫–∞—Ö —Å–∏–ª—å–Ω–æ —Å—Ç—Ä–∞–¥–∞–µ—Ç. –î–∞–µ—Ç –±–æ–ª—å—à—É—é –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –ø—Ä–æ—Ü. –î–µ—à–µ–≤–ª–µ —á–µ—Ä–µ–∑ openresty —Ä–µ–∑–∞—Ç—å –±–µ–∑ –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–∞

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–ª–ª–µ–∫—Ü–∏—é —Å –ø–∞—Ä—Å–µ—Ä–æ–º –∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏ –¥–ª—è nginx. –ü–∞—Ä—Å–µ—Ä –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ñ–∞–π–ª–∞, —Å—Ü–µ–Ω–∞—Ä–∏–π –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –∑–∞–ø—Ä–æ—Å–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä —á–µ–ª–æ–≤–µ–∫ –ø—ã—Ç–∞–ª—Å—è –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º –¥–∞–Ω–Ω—ã–º, –Ω–∞–ø—Ä–∏–º–µ—Ä .env –∏–ª–∏ .git). –ë–∞—É–Ω—Å–µ—Ä—ã —ç—Ç–æ –∫–∞–∫ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å—Ç—Ä–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä –±–∞–Ω–∏—Ç—å —á–µ—Ä–µ–∑ CLoudFlare –∏–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞–ø—á—É

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏–ª–∏ –ø–∞—Ä—Å–µ—Ä–∞ –∏–ª–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è, –ø–æ–ª–µ–∑–Ω–æ –∑–∞—é–∑–∞—Ç—å [cscli explain](https://habr.com/ru/company/crowdsec/blog/593917/), —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –µ–≥–æ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∏ –∫–∞–∫ —Ä–µ–∞–≥–∏—Ä–∞–µ—Ç. –ú–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å, –ø–æ–ª–µ—Ç–∏—Ç –ª–∏ –∑–∞–ø—Ä–æ—Å –±–∞–Ω –Ω–∞–ø—Ä–∏–º–µ—Ä

[–í–æ—Ç](https://habr.com/ru/company/crowdsec/blog/586944/) —Ö–æ—Ä–æ—à–∞—è —Å—Ç–∞—Ç—å—è. –ö–æ–≥–¥–∞ —è –ø–æ—â—É–ø–∞–ª CrowdSec –∏ –Ω–µ –ø–æ–Ω—è–ª —á—Ç–æ –∫ —á–µ–º—É, —Ç–æ –æ–Ω–∞ —Å–∫–ª–µ–∏–ª–∞ –º–æ—é –Ω–µ—Ü–µ–ª—å–Ω—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É –≤–æ –µ–¥–∏–Ω–æ.


---

–ú–Ω–µ–Ω–∏–µ —Å–ø—É—Å—Ç—è –ø–∞—Ä—É —á–∞—Å–æ–≤ –∏–ª–∏ –¥–Ω–µ–π (–Ω–µ –ø–æ–º–Ω—é) –≤–æ–∑–Ω–∏:

> –ö–æ—Ä–æ—á–µ, –≤ –∂–æ–ø—É —ç—Ç–æ—Ç crowdsec. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å, –∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤—Å–µ —Ä–∞–≤–Ω–æ **–º–µ–¥–ª–µ–Ω–Ω–æ**.

![–º–µ–¥–ª–µ–Ω–Ω–æ](https://file.def.pm/1tiyvAK1.jpg)

> –ù–æ –∏—Ö –∏–¥–µ—è —Å –ø–∞—Ä—Å–∏–Ω–≥–æ–º —Å–∞–º–æ–≥–æ –ª–æ–≥–∞ –≤–º–µ—Å—Ç–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –≤ openresty –º–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è.
> –ß–∏—Å—Ç–æ —á–µ–∫–∞–µ—à—å –ª–æ–≥–∏, –∏—â–µ—à—å —Ç–∞–º –≥–æ–≤–Ω–æ –∏ –ø–æ—Ç–æ–º —ç—Ç–æ –≥–æ–≤–Ω–æ –∫–∏–¥–∞–µ—à—å –≤ CloudFalre. –ò–¥–µ—è –ø—Ä–æ—Å—Ç–∞, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–ª–æ–∂–Ω–∞—è
> –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å lua —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —á–∏—Ç–∞—Ç—å –ª–æ–≥ –Ω–∞ –ª–µ—Ç—É –∏ –¥–µ–ª–∞—Ç—å —Ç–æ –∂–µ —Å–∞–º–æ–µ. –î–∞–∂–µ openresty –Ω–µ –Ω—É–∂–µ–Ω –±—ã–ª –±—ã üôÇ
> —á–µ—Ä–µ–∑ API –ø—Ä–∞–≤–∏–ª–∞ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤—ã—Å—Ç–∞–≤–ª—è—Ç—å

