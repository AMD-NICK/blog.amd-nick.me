# Docker

![](https://i.imgur.com/WpRwAhO.png)

## ü§î –ó–∞—á–µ–º –æ–Ω –ª–∏—á–Ω–æ –º–Ω–µ

**Docker –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–∏—Å—Ç–µ–º—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—á—Ç–∏ –ª—é–±–æ–π –Ω—É–∂–Ω—ã–π —Å–µ—Ä–≤–∏—Å –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π**. –ü–æ —Å—É—Ç–∏ –∫–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞–µ—Ç "–≤–∏—Ä—Ç—É–∞–ª–∫—É", –≤ –∫–æ—Ç–æ—Ä–æ–π —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω—É–∂–Ω—ã–π —Å–æ—Ñ—Ç. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ —ç—Ç–æ —Ç–æ–∂–µ –ø—Ä–æ—Å—Ç–æ "—Å–∫–∞—á–∞—Ç—å –Ω–æ–≤—ã–π –æ–±—Ä–∞–∑ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å". –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –∏–∑ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ ‚Äì —ç—Ç–æ "—á—Ç–æ-—Ç–æ" —Ç–∞–∫ –∂–µ —É–¥–∞–ª—è–µ—Ç—Å—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π, **–Ω–µ –æ—Å—Ç–∞–≤–ª—è—è –º—É—Å–æ—Ä–∞**. –ü—Ä–∏ —ç—Ç–æ–º –Ω–∞ —Å–∞–º–æ–º —Ö–æ—Å—Ç–µ –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ docker –∏ –±–æ–ª—å—à–µ –Ω–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

![lazydocker](https://i.imgur.com/AOrJG1P.png)


## ü™Ñ –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

- micro - —É–¥–æ–±–Ω—ã–π –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π —É–¥–æ–±–Ω–æ –∑–∞–∫–∏–¥—ã–≤–∞—Ç—å –≤–Ω—É—Ç—Ä—å docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (—É–ø–æ–º–∏–Ω–∞–ª—Å—è –≤ –±–ª–æ–≥–µ)
- [lazydocker](https://github.com/jesseduffield/lazydocker) ‚Äì UI –¥–ª—è Docker. –ò—Å–ø–æ–ª—å–∑—É—é —Å–∞–º, —É–ø–æ–º–∏–Ω–∞–ª—Å—è –≤ –±–ª–æ–≥–µ
- [dry](https://github.com/moncho/dry) ‚Äì –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –¥–ª—è üëÜ
- [portainer](https://github.com/portainer/portainer) ‚Äì –±—Ä–∞—É–∑–µ—Ä–Ω—ã–π UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ–º Docker
- [composerize](https://github.com/magicmark/composerize) ‚Äì –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å docker run –∫–æ–º–∞–Ω–¥—É –≤ docker-compose —Ñ–æ—Ä–º–∞—Ç. [–û–Ω–ª–∞–π–Ω –¥–µ–º–æ](https://www.composerize.com).
- [supdock](https://github.com/segersniels/supdock) ‚Äì `alias docker=supdock` –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–¥–æ–±–Ω–µ–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ docker –∫–æ–º–∞–Ω–¥—ã

## ‚å®Ô∏è –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç https://github.com/amir20/dozzle
docker run --rm -v /var/run/docker.sock:/var/run/docker.sock -p 8888:8080 amir20/dozzle:latest

# –ø–æ–ª—É—á–∏—Ç—å –ª–æ–≥ –∏ —Å–ª–µ–¥–∏—Ç—å –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
docker logs -fn 100 CONTAINER_NAME
docker compose logs -f --tail 100

# –≤—Ö–æ–¥ –≤ bash/sh –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (—Å–µ—Ä–≤–∏—Å–∞)
# —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ñ–∞–π–ª—ã, –≤—ã–ø–æ–ª–Ω–∏—Ç—å redis-cli, –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ë–î –∏ —Ç.–¥.
docker exec -it CONTAINER_NAME sh
docker compose exec traefik sh

# –∏–Ω—Ñ–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
# - —É–∑–Ω–∞—Ç—å –ø—É—Ç—å –∫ volume –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–∫–æ–≥–¥–∞ –Ω–∞–¥–æ –±–µ–∫–∞–ø–Ω—É—Ç—å)
# - —É–∑–Ω–∞—Ç—å ip –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –ü–æ–ª–µ–∑–Ω–æ, –∫–æ–≥–¥–∞ —Ö–æ—á–µ—à—å —Å –Ω–∞–ø—Ä–∏–º–µ—Ä REDIS GUI –Ω–∞ —Å–≤–æ–µ–º –∫–æ–º–ø–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ REDIS –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (port forwarding)
# - —É–∑–Ω–∞—Ç—å –ø—Ä–∏—á–∏–Ω—É, –ø–æ—á–µ–º—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä unhealthy
docker inspect CONTAINER_NAME
# –¥–ª—è IP –∏—Å–∫–∞—Ç—å .NetworkSettings.Networks.*.IPAddress
```

## üí° –°–æ–≤–µ—Ç—ã

### –£–¥–æ–±–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ Dockerfile

**–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å Dockerfile**, —Ç–æ –¥–µ–ª–∞—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –±–∞–∑–æ–≤–æ–≥–æ image –∏ –≤–Ω—É—Ç—Ä–∏ –≤–≤–æ–∂—É –∫–æ–º–∞–Ω–¥—ã –æ–¥–Ω–∞ –∑–∞ –æ–¥–Ω–æ–π, –ø–æ–∫–∞ –Ω–µ –ø–æ–ª—É—á—É –∂–µ–ª–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –í –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—Å–µ —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–∏—Å—ã–≤–∞—é –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª.

`docker run --rm -it base_image_name sh`

–ï—Å–ª–∏ –≥–¥–µ-—Ç–æ –∑–∞—Ñ–µ–π–ª–∏–ª—Å—è, —Ç–æ –ø–∏—à—É exit –∏ –≤–≤–æ–∂—É –∫–æ–º–∞–Ω–¥—É –∑–∞–Ω–æ–≤–æ. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–∞–π–ø–∞–µ—Ç—Å—è

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–ª–∏–∞—Å–æ–≤

[–ó–¥–µ—Å—å](https://gist.github.com/jgrodziski/9ed4a17709baad10dbcd4530b60dfcbb) –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –∫—É—á—É –ø–æ–ª–µ–∑–Ω—ã—Ö –∞–ª–∏–∞—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø—Ä–∏–≥–æ–¥–∏—Ç—å—Å—è.

–ö–∞–∫ –º–∏–Ω–∏–º—É–º, —è —Ä–µ–∫–æ–º–µ–Ω–¥—É—é —Å–¥–µ–ª–∞—Ç—å `alias dc='docker compose'` –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å `dip` –∏–∑ —Å—Å—ã–ª–∫–∏ –≤—ã—à–µ

–ï—â–µ —è —Å–¥–µ–ª–∞–ª —Å–≤–æ–π –∞–ª–∏–∞—Å `dps`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π docker ps –±–µ–∑ –≤—Å–µ–≥–æ –ª–∏—à–Ω–µ–≥–æ. –û –Ω–µ–º –Ω–∞–ø–∏—Å–∞–ª –≤ [–ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ Lunux —Ö–æ—Å—Ç–∞](../linux/prepare.md)

## üß± –Æ–∑–∞—é/—é–∑–∞–ª —Å–µ—Ä–≤–∏—Å—ã

–°–ø–∏—Å–æ–∫ –Ω–µ–ø–æ–ª–Ω—ã–π. –ü—Ä–æ—Å—Ç–æ –∫–∞–∂–¥–æ–º—É —Å–≤–æ–µ

- traefik ‚Äì –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ nginx –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤. –°–∞–º –¥–µ–ª–∞–µ—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –∏ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—á–µ–Ω—å –ª–µ–≥–∫–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å –Ω–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—è traefik
- [watchtower](https://github.com/containrrr/watchtower) ‚Äì –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∫–æ–≥–¥–∞ –æ–±–Ω–æ–≤–∏–ª—Å—è image
- [cloudflare-ddns](https://hub.docker.com/r/oznu/cloudflare-ddns/) ‚Äì –æ–±–Ω–æ–≤–ª—è–µ—Ç IP –≤ CF. –ü—Ä–∏–∫—Ä—É—á–∏–≤–∞—é –∫ web —Å–µ—Ä–≤–∏—Å–∞–º, —á—Ç–æ–±—ã –ø—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ –Ω–∞ –Ω–æ–≤—ã–π —Ö–æ—Å—Ç –Ω–µ –Ω—É–∂–Ω–æ –±—ã–ª–æ –ª–µ–∑—Ç—å –≤ CF –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è IP
- [telegram-bot-api](https://hub.docker.com/r/aiogram/telegram-bot-api) –¥–ª—è –º–æ–µ–≥–æ [@video_screenshoter_bot](https://t.me/video_screenshoter_bot) (–±–æ—Ç –ø—Ä–∏—Å—ã–ª–∞–µ—Ç —Å–∫—Ä–∏–Ω—ã —É—á–∞—Å—Ç–∫–æ–≤ –≤–∏–¥–µ–æ). –°–∫–∏–¥—ã–≤–∞–µ—à—å –±–æ—Ç—É –≥–æ—Ä—É –ø–æ—Ä–Ω—É—à–∫–∏ —Å –∫–∞–Ω–∞–ª–æ–≤, –∞ –æ–Ω —Ç–µ–±–µ –ø—Ä–∏—Å—ã–ª–∞–µ—Ç —Å–∫—Ä–∏–Ω—ã –∏ —Ç—ã —Ä–µ—à–∞–µ—à—å –≥–æ–¥–Ω–æ—Ç–∞ –∏–ª–∏ –Ω–µ—Ç üëç. –ë–µ–∑ —Å–µ—Ä–≤–∏—Å–∞ –±–æ—Ç —É–ø–∏—Ä–∞–ª—Å—è –≤ –ª–∏–º–∏—Ç —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞
- ispy agent ‚Äì –≤–∏–¥–µ–æ–Ω–∞–±–ª—é–¥–µ–Ω–∏–µ. `Ctrl + K`, –ø–∏—Å–∞–ª –æ –Ω–µ–º
- ghost cms, pritunl vpn, outline vpn, mariadb, redis, laradock, luarocks, openresty...

### –ë—ã—Å—Ç—Ä–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤–µ–± —Ñ–∞–π–ª–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä

[tinyfilemanager](https://github.com/prasathmani/tinyfilemanager) ‚Äì –∑–∞–ø—É—Å—Ç–∏–ª –∏ —Ä–∞–±–æ—Ç–∞–µ—à—å. `admin:admin@123`. –ù–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç .mkv –≤–∏–¥–µ–æ

```bash
# –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –ø–æ—Ä—Ç—É 12345
docker run -d -v $PWD:/var/www/html/data -p 12345:80 tinyfilemanager/tinyfilemanager:master
```

[filestash](https://github.com/mickael-kerjean/filestash) ‚Äì –≤—Ä–æ–¥–µ `admin:admin`, –Ω—É–∂–Ω–æ –∫–ª–∏–∫–Ω—É—Ç—å Local –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ. –î–∞–∂–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç mkv –≤—Ä–æ–¥–µ

```bash
docker run -d -v $PWD:/var/www/html/data -p 12345:8334 machines/filestash
```

–ï—â–µ –µ—Å—Ç—å [filebrowser](https://github.com/filebrowser/filebrowser), —Å–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π —Ç–∞–∫ —Ç–æ. –ù–µ –ø–æ–º–Ω—é –ø—Ä–æ–±–æ–≤–∞–ª –ª–∏

## üí≠ –ú—ã—Å–ª–∏ –≤—Å–ª—É—Ö, –Ω–µ –ø—Ä–∏–¥—É–º–∞–ª —Ä–∞–∑–¥–µ–ª

–£ Docker –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ **healthcheck** –ø—Ä–æ–≤–µ—Ä–æ–∫ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤. –Ø –¥–æ —ç—Ç–æ–≥–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª —Å –Ω–∏–º, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ –ø–æ–Ω–∏–º–∞–ª –∑–∞—á–µ–º –æ–Ω–æ, –µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ—Å—Ç–æ `restart: rule` –Ω–∞—Å—Ç—Ä–æ–π–∫–∞, –∫–æ—Ç–æ—Ä–∞—è —Ä–µ–±—É—Ç–∏—Ç —É–ø–∞–≤—à–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. –°–µ–π—á–∞—Å –æ—Å–æ–∑–Ω–∞–ª, —á—Ç–æ —ç—Ç–∞ —à—Ç—É–∫–∞ –Ω–µ –≤—Å–µ–≥–¥–∞ –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä RIP –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–∞ –≤ –∫—É—á–µ —Å–ª—É—á–∞–µ–≤:

- –ë–î –ø–æ–π–º–∞–ª–∞ –ª–∏–º–∏—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∏ –≤—Ä–æ–¥–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –ø–æ —Ñ–∞–∫—Ç—É –Ω–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞.
- –¢–ì –±–æ—Ç –≤—Ä–æ–¥–µ –∏ –Ω–µ –∫—Ä–∞—à–Ω—É–ª—Å—è, –Ω–æ —Å–ª—É—á–∏–ª—Å—è –±–∞–≥ –∏ –æ–Ω "–∑–∞–≤–∏—Å".
- –°–µ—Ä–≤–∏—Å —Å–æ–∂—Ä–∞–ª –¥–æ—Ñ–∏–≥–∞ –û–ó–£ –∏ –ø—Ä–æ—â–µ –Ω–∞–∑–≤–∞—Ç—å –µ–≥–æ unhealthy —á–µ–º –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å —á—É–∂–æ–π –∫–æ–¥.

–¢—É—Ç –Ω–∞—Å—Ç—Ä–µ—á—É –∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç —Ö–µ–ª—Å—á–µ–∫. –û–Ω –º–æ–∂–µ—Ç –ª–∏–±–æ –ø—Ä–æ—Å—Ç–æ –æ—Ç–º–µ—á–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä "–Ω–µ–∑–¥–æ—Ä–æ–≤—ã–º" –≤ docker ps –ª–∏–±–æ —Å—Ä–∞–∑—É —Ä–µ—Å—Ç–∞—Ä—Ç–∏—Ç—å –µ–≥–æ, –µ—Å–ª–∏ —É–∫–∞–∑–∞—Ç—å `--restart`.

–ü–æ—á–∏—Ç–∞—Ç—å –µ—â–µ: [–∫–ª–∏–∫](https://dotsandbrackets.com/docker-health-check-ru/)

## üìí –ü–æ—á–∏—Ç–∞—Ç—å

- [Awesome docker](https://github.com/veggiemonk/awesome-docker) ‚Äì —Å–ø–∏—Å–æ–∫ –∫—É—á–∏ –≤—Å–µ–≥–æ —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ —Å Docker
- [–®–ø–∞—Ä–≥–∞–ª–∫–∏ –ø–æ Docker](https://github.com/wsargent/docker-cheat-sheet)
