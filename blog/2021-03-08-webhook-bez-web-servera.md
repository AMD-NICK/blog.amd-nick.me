---
title: Webhook без веб сервера
date: '2021-03-08 13:37:00'
slug: webhook-bez-web-servera
image: https://s3.blog.amd-nick.me/2021/03/long-polling-instead-webhook.jpg
tags: [webhook, polling, microservice, api]
---

![](https://s3.blog.amd-nick.me/2021/03/long-polling-instead-webhook.jpg)

Если развернуть веб сервер с вебхуком возможности нет, а принимать сообщения от какого-то сервиса (например Telegram) нужно, мы используем polling. Это когда мы сами спрашиваем у сервиса, нет ли у него для нас новостей. В случае с Telegram, это происходит через запрос [getUpdates](https://core.telegram.org/bots/api#getupdates).

Но что, если сервис не имеет своего поллинг сервера и предлагает лишь доставку апдейтов на webhook, как например GitHub? Или есть ряд других проблем, которые перечислены в разделе "Применения"?

<!--truncate-->

# Решение

poll.gmod.app — микросервис, который может выступить в качестве вебхука, а сам отдавать обновления по запросу (по подобию getUpdates у телеграм)

Там где вам нужно указать ссылку на вебхук, вы указываете ссылку на наш микросервис. Мы принимаем входящие сообщения, храним их у себя, а вы потом получаете их через http GET запрос

## Документация

<!-- ![](https://s3.blog.amd-nick.me/2021/11/poll-gmod-app-docs.jpg) -->
[poll.gmod.app документация](2021-11-15-poll-gmod-app-docs.md)

## Применения

> Главная цель – сделать единую точку, куда все сервисы будут присылать апдейты, а клиенты забирать все сразу с одного единственного места. **Проще выполнить один GET запрос вместо 20 разных**.

Изначальное применение найдено в Garry's Mod. Это игра, где разработчики имеют условно полную свободу действий на своих серверах, но поднять веб-сервер является проблемой.

- [gm-donate](https://gm-donate.ru) – сервис приема пожертвований для Garry's Mod серверов [использует](https://github.com/GM-DONATE/IGS/tree/main/addons/igs-core/lua/igs/modules/pushes) poll.gmod.app как способ мгновенной доставки сообщений о платежах Garry's Mod серверам для мгновенного зачисления
- [ggram](https://git.io/ggram) – библиотека для создания Telegram ботов на Garry's Mod серверах может использовать и poll.gmod.app как единую точку, куда множество Telegram ботов присылают апдейты.
- [Integromat](http://integromat.com) – nocode сервис для автоматизации всего и вся присылает отчеты на poll.gmod.app, которые в дальнейшем обрабатываются кодом на Garry's Mod сервере
- [Monobank API](https://api.monobank.ua/docs/) – украинский мобильный банк, присылает на единственный URL poll.gmod.app пуши сразу с десятка аккаунтов, когда по карте проходит какая-то транзакция, а специальный Telegram бот отправляет информацию о транзакции в чат
- GitHub присылает сообщения с коммитами с нескольких репозиториев сразу, а специальный бот делает [красивый summary](https://img.qweqwe.ovh/1636912086234.png) в специальном чате
